if(function(e,t,o){var n,i=e.getElementsByTagName(t)[0];e.getElementById(o)||((n=e.createElement(t)).id=o,n.src="//connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(n,i))}(document,"script","facebook-jssdk"),"undefined"!=typeof eltdSocialLoginVars)var facebookAppId=eltdSocialLoginVars.social.facebookAppId;facebookAppId&&(window.fbAsyncInit=function(){FB.init({appId:facebookAppId,cookie:!0,xfbml:!0,version:"v2.5"}),window.FB=FB}),function(s){"use strict";var e={};function t(){var e=s(".eltd-login-opener"),t=s(".eltd-login-register-holder");if(e){var o=s(".eltd-login-register-content");e.click(function(e){e.preventDefault(),t.fadeIn(300),t.addClass("opened")}),t.click(function(e){t.hasClass("opened")&&(t.fadeOut(300),t.removeClass("opened"))}),s(".eltd-login-register-content").click(function(e){e.stopPropagation()}),s(window).on("keyup",function(e){t.hasClass("opened")&&27==e.keyCode&&(t.fadeOut(300),t.removeClass("opened"))}),o.tabs()}}function o(){s(".eltd-login-form").on("submit",function(e){e.preventDefault();var t={action:"eltd_membership_login_user",security:s(this).find("#eltd-login-security").val(),login_data:s(this).serialize()};return s.ajax({type:"POST",data:t,url:ElatedMembershipAjaxUrl,success:function(e){var t;l(t=JSON.parse(e)),"success"==t.status&&(window.location=t.redirect)}}),!1})}function n(){s(".eltd-register-form").on("submit",function(e){e.preventDefault();var t={action:"eltd_membership_register_user",security:s(this).find("#eltd-register-security").val(),register_data:s(this).serialize()};return s.ajax({type:"POST",data:t,url:ElatedMembershipAjaxUrl,success:function(e){var t;l(t=JSON.parse(e)),"success"==t.status&&(window.location=t.redirect)}}),!1})}function i(){var o=s(".eltd-reset-pass-form");o.submit(function(e){e.preventDefault();var t={action:"eltd_membership_user_lost_password",user_login:o.find("#user_reset_password_login").val()};s.ajax({type:"POST",data:t,url:ElatedMembershipAjaxUrl,success:function(e){var t=JSON.parse(e);l(t),"success"==t.status&&(window.location=t.redirect)}})})}function l(e){var t=s(".eltd-membership-response-holder"),o=_.template(s(".eltd-membership-response-template").html())({messageClass:"success"===e.status?"eltd-membership-message-succes":"eltd-membership-message-error",message:e.message});t.html(o)}function a(){s(".eltd-facebook-login-holder").submit(function(e){e.preventDefault(),window.FB.login(function(e){var t;"connected"===(t=e).status?(console.log("Welcome! Fetching information from Facebook..."),FB.api("/me","GET",{fields:"id, name, email, link, picture"},function(e){var t=s(".eltd-facebook-login-holder [name^=eltd_nonce_facebook_login]").val();e.nonce=t,e.image=e.picture.data.url;var o={action:"eltd_membership_check_facebook_user",response:e};s.ajax({type:"POST",data:o,url:ElatedMembershipAjaxUrl,success:function(e){var t;l(t=JSON.parse(e)),"success"==t.status&&(window.location=t.redirect)}})})):"not_authorized"===t.status?console.log("Please log into this app"):console.log("Please log into Facebook")},{scope:"email, public_profile"})})}function r(){if("undefined"!=typeof eltdSocialLoginVars)var e=eltdSocialLoginVars.social.googleClientId;e?gapi.load("auth2",function(){window.auth2=gapi.auth2.init({client_id:e}),s(".eltd-google-login-holder").submit(function(e){e.preventDefault(),window.auth2.signIn(),function(){if(window.auth2.isSignedIn.get()){var e=window.auth2.currentUser.get(),t=e.getBasicProfile(),o=s(".eltd-google-login-holder [name^=eltd_nonce_google_login]").val(),n={id:t.getId(),name:t.getName(),email:t.getEmail(),image:t.getImageUrl(),link:"https://plus.google.com/"+t.getId(),nonce:o},i={action:"eltd_membership_check_google_user",response:n};s.ajax({type:"POST",data:i,url:ElatedMembershipAjaxUrl,success:function(e){var t;l(t=JSON.parse(e)),"success"==t.status&&(window.location=t.redirect)}})}}()})}):s(".eltd-google-login-holder").submit(function(e){e.preventDefault()})}function c(){var e=s("#eltd-membership-update-profile-form");if(e.length){var n=e.find("button"),i=n.data("updating-text"),a=n.data("updated-text");e.on("submit",function(e){e.preventDefault();var o=n.html();n.html(i);var t={action:"eltd_membership_update_user_profile",data:s(this).serialize()};return s.ajax({type:"POST",data:t,url:ElatedMembershipAjaxUrl,success:function(e){var t;l(t=JSON.parse(e)),"success"==t.status?(n.html(a),window.location=t.redirect):n.html(o)}}),!1})}}"undefined"!=typeof eltd&&(eltd.modules.socialLogin=e),e.eltdUserLogin=o,e.eltdUserRegister=n,e.eltdUserLostPassword=i,e.eltdInitLoginWidgetModal=t,e.eltdInitFacebookLogin=a,e.eltdInitGooglePlusLogin=r,e.eltdUpdateUserProfile=c,s(document).ready(function(){t(),o(),n(),i(),c()}),s(window).load(function(){a(),r()}),s(window).resize(function(){}),s(window).scroll(function(){})}(jQuery);